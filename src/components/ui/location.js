import { Loader } from "@googlemaps/js-api-loader";
import onceMounted from "~/src/hooks/once-mounted";

import usePage from "~/src/hooks/use-page";
import "~/src/stylesheets/ui/location.css";

const MAP_APIKEY = process.env.MAP_APIKEY;

const getSvgPinContent = (name) => {
  const plainTextSvg = `<svg width="93" height="62" viewBox="0 0 93 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.47715 0 0 4.47715 0 10V40C0 45.5228 4.47715 50 10 50H37.9991C38.0435 50.1692 38.1117 50.3371 38.2058 50.5L44.2679 61C45.0378 62.3333 46.9622 62.3333 47.7321 61L53.7942 50.5C53.8883 50.3371 53.9565 50.1692 54.0009 50H83C88.5229 50 93 45.5228 93 40V10C93 4.47715 88.5228 0 83 0H10Z" fill="white"></path><g clip-path="url(#clip0_214_542)"><path d="M68.7798 20.5209C68.7886 21.7088 68.7963 22.8981 68.8051 24.086C68.5616 24.0924 68.3192 24.1038 68.0757 24.1025C67.4781 24.1012 66.8806 24.0936 66.2818 24.0873C66.2704 21.3433 66.2602 18.598 66.2463 15.854C66.2412 14.892 66.2247 13.9299 66.2158 12.9679C66.2158 12.907 66.2234 12.8473 66.2285 12.7864C66.481 12.7826 66.7347 12.7801 66.9872 12.7763C68.1924 12.7763 69.3976 12.7788 70.6028 12.7763C70.6789 12.7763 70.7563 12.7458 70.8324 12.7293L71.8715 12.709C72.403 12.7864 72.9409 12.8334 73.4509 13.0225C74.2692 13.3271 74.92 13.8322 75.326 14.6166C75.4199 14.7993 75.463 15.0075 75.5303 15.2042C75.5493 15.2271 75.567 15.2499 75.5861 15.2715C75.5924 15.288 75.5962 15.3045 75.5988 15.3222C75.6089 15.3489 75.6191 15.3756 75.6292 15.4035C75.7523 15.9645 75.8005 16.5305 75.7079 17.1017C75.6888 17.1651 75.6711 17.2298 75.652 17.2933C75.6203 17.8162 75.4021 18.2693 75.1129 18.6894C74.7297 19.2466 74.2045 19.6337 73.5918 19.9078C73.5106 19.9446 73.4306 19.9815 73.3418 20.0208C74.2629 21.3522 75.175 22.6709 76.0859 23.9896C75.9794 24.0061 75.8715 24.0352 75.765 24.0365C75.2397 24.0429 74.7158 24.0454 74.1906 24.0441C73.848 24.0441 73.5055 24.034 73.163 24.0276C72.4018 22.9031 71.6406 21.7799 70.8794 20.6554C70.8451 20.6059 70.8045 20.5602 70.7665 20.5132C70.7157 20.4917 70.6662 20.4511 70.6155 20.4511C70.018 20.4511 69.4217 20.4587 68.8242 20.4625C68.8102 20.4815 68.795 20.4993 68.781 20.5183L68.7798 20.5209ZM71.6279 15.0303C71.5746 15.0113 71.5226 14.9745 71.4693 14.9745C70.599 14.972 69.7274 14.9745 68.8572 14.9796C68.828 14.9796 68.7988 15.0164 68.7696 15.0354C68.7709 16.0888 68.7734 17.1435 68.7747 18.197C68.8419 18.2211 68.9092 18.2655 68.9751 18.2655C69.7427 18.268 70.5089 18.2655 71.2765 18.2579C71.4147 18.2566 71.5543 18.2211 71.6926 18.202C71.9121 18.1399 72.1455 18.1056 72.3497 18.0104C72.823 17.787 73.097 17.4215 73.163 16.877C73.1883 16.6638 73.1541 16.4709 73.1465 16.2691C73.1414 16.151 73.1249 16.0254 73.078 15.92C72.7976 15.2994 72.2812 15.0544 71.6304 15.0316L71.6279 15.0303Z" fill="#252525"></path><path d="M48.1927 23.0151C48.0455 23.4161 47.8996 23.8172 47.7525 24.2195C47.2805 24.2221 46.8099 24.2221 46.3379 24.2297C46.2415 24.2309 46.1464 24.2601 46.05 24.2766H44.4997C44.5542 24.2018 44.5923 24.1484 44.6316 24.0951C45.5844 22.7752 45.8153 21.327 45.3154 19.7888C44.8879 18.4739 44.0074 17.5499 42.6931 17.0829C42.3683 16.9674 42.0156 16.9268 41.6769 16.8506C41.4308 16.763 41.1834 16.7656 40.9373 16.8481C39.2728 17.0308 38.093 17.8786 37.4155 19.4131C37.1491 20.0185 37.0793 20.6594 37.054 21.3156C37.0324 21.8893 37.1834 22.4287 37.3673 22.9478C37.5335 23.4187 37.8113 23.8515 38.1412 24.2398C38.0435 24.2538 37.9458 24.2804 37.8469 24.2804C37.229 24.2855 36.6112 24.2843 35.9934 24.2893C35.8957 24.2893 35.7993 24.3198 35.7016 24.3363C35.4402 24.3363 35.1802 24.3363 34.9188 24.3376C34.8998 24.3185 34.8795 24.3008 34.8605 24.2817C34.5623 23.67 34.3999 23.0201 34.2718 22.3538C34.2134 22.0454 34.2046 21.7395 34.197 21.4324C34.1767 20.6328 34.2731 19.8434 34.5369 19.0907C35.1903 17.225 36.4184 15.8682 38.2072 15.0153C38.7933 14.7361 39.4124 14.5711 40.0378 14.4303C40.3093 14.3693 40.596 14.3757 40.8751 14.3516C41.1821 14.3516 41.4904 14.3516 41.7974 14.3516C42.3404 14.4404 42.8986 14.4785 43.4251 14.6295C45.427 15.2019 46.9215 16.4089 47.7994 18.3165C48.0037 18.7607 48.1191 19.2456 48.2587 19.7177C48.3043 19.87 48.2967 20.0375 48.3145 20.1975C48.3323 20.2609 48.35 20.3244 48.369 20.3891C48.449 20.9577 48.4477 21.525 48.369 22.0936C48.3652 22.1342 48.3627 22.1736 48.3589 22.2142C48.312 22.4566 48.2663 22.6978 48.2193 22.9402C48.2105 22.9656 48.2029 22.9897 48.194 23.0151H48.1927Z" fill="#252525"></path><path d="M48.1927 23.0151C48.0455 23.4161 47.8996 23.8172 47.7525 24.2195C47.2805 24.2221 46.8099 24.2221 46.3379 24.2297C46.2415 24.2309 46.1464 24.2601 46.05 24.2766H44.4997C44.5542 24.2018 44.5923 24.1484 44.6316 24.0951C45.5844 22.7752 45.8153 21.327 45.3154 19.7888C44.8879 18.4739 44.0074 17.5499 42.6931 17.0829C42.3683 16.9674 42.0156 16.9268 41.6769 16.8506C41.4308 16.763 41.1834 16.7656 40.9373 16.8481C39.2728 17.0308 38.093 17.8786 37.4155 19.4131C37.1491 20.0185 37.0793 20.6594 37.054 21.3156C37.0324 21.8893 37.1834 22.4287 37.3673 22.9478C37.5335 23.4187 37.8113 23.8515 38.1412 24.2398C38.0435 24.2538 37.9458 24.2804 37.8469 24.2804C37.229 24.2855 36.6112 24.2843 35.9934 24.2893C35.8957 24.2893 35.7993 24.3198 35.7016 24.3363C35.4402 24.3363 35.1802 24.3363 34.9188 24.3376C34.8998 24.3185 34.8795 24.3008 34.8605 24.2817C34.5623 23.67 34.3999 23.0201 34.2718 22.3538C34.2134 22.0454 34.2046 21.7395 34.197 21.4324C34.1767 20.6328 34.2731 19.8434 34.5369 19.0907C35.1903 17.225 36.4184 15.8682 38.2072 15.0153C38.7933 14.7361 39.4124 14.5711 40.0378 14.4303C40.3093 14.3693 40.596 14.3757 40.8751 14.3516C41.1821 14.3516 41.4904 14.3516 41.7974 14.3516C42.3404 14.4404 42.8986 14.4785 43.4251 14.6295C45.427 15.2019 46.9215 16.4089 47.7994 18.3165C48.0037 18.7607 48.1191 19.2456 48.2587 19.7177C48.3043 19.87 48.2967 20.0375 48.3145 20.1975C48.3323 20.2609 48.35 20.3244 48.369 20.3891C48.449 20.9577 48.4477 21.525 48.369 22.0936C48.3652 22.1342 48.3627 22.1736 48.3589 22.2142C48.312 22.4566 48.2663 22.6978 48.2193 22.9402C48.2105 22.9656 48.2029 22.9897 48.194 23.0151H48.1927Z" fill="#252525"></path><path d="M22.3106 24.4554C22.1583 24.4592 22.0061 24.4554 21.8551 24.4681C21.7105 24.4795 21.6331 24.4085 21.5824 24.2854C21.302 23.6051 21.0178 22.9273 20.7425 22.2445C20.5763 21.8333 20.433 21.4119 20.2642 21.0007C19.9813 20.3141 19.6807 19.6338 19.3965 18.9471C19.2531 18.5994 19.1402 18.2377 18.9969 17.8899C18.733 17.249 18.4475 16.6169 18.1862 15.976C17.8652 15.1865 17.5595 14.3895 17.2461 13.5975C17.1738 13.4147 17.0939 13.2345 17 13.0137C17.2575 13.0137 17.4694 13.0137 17.6813 13.0137C17.935 13.0175 18.1875 13.0238 18.4412 13.0264C18.8966 13.0314 19.3533 13.0352 19.8088 13.0403C20.0435 13.6711 20.2807 14.2994 20.5129 14.9314C20.7108 15.4696 20.8986 16.0128 21.1003 16.5496C21.3007 17.0814 21.5177 17.6069 21.7219 18.1361C21.864 18.508 21.9959 18.8837 22.1342 19.2568C22.2662 19.616 22.3968 19.9752 22.5339 20.3318C22.6087 20.526 22.695 20.7151 22.7927 20.9461C22.8802 20.7304 22.9652 20.5362 23.04 20.3382C23.172 19.9879 23.2976 19.6363 23.4257 19.2847C23.5247 19.0144 23.6236 18.7441 23.7213 18.4725C23.9192 17.9242 24.1146 17.3733 24.315 16.8251C24.4939 16.3351 24.6829 15.8478 24.8593 15.3566C24.9735 15.0393 25.0661 14.7131 25.1828 14.3958C25.3046 14.062 25.4416 13.7346 25.571 13.4033C25.6205 13.2764 25.6662 13.1469 25.7131 13.0187C26.6075 13.0187 27.5019 13.0187 28.3963 13.0187C28.277 13.3335 28.1591 13.6483 28.0373 13.963C27.8964 14.3273 27.7518 14.6903 27.6097 15.0533C27.4588 15.4391 27.3078 15.8249 27.1555 16.2108C26.9741 16.6715 26.7965 17.1335 26.61 17.5929C26.3829 18.1501 26.1406 18.7022 25.9199 19.2619C25.6382 19.9803 25.3782 20.7062 25.0965 21.4246C24.8504 22.0503 24.5815 22.6684 24.329 23.2929C24.1806 23.6584 24.0461 24.029 23.9053 24.3983C23.4701 24.4009 23.0362 24.3996 22.6011 24.4072C22.5047 24.4085 22.4083 24.4389 22.3118 24.4554H22.3106Z" fill="#252525"></path><path d="M58.3833 12.8496C58.3909 13.4474 58.4036 14.0439 58.4074 14.6417C58.4176 16.6572 58.4214 18.6727 58.4315 20.6894C58.4379 21.8444 58.4506 22.9981 58.4607 24.153C57.6703 24.1594 56.8787 24.167 56.0883 24.1708C56.0388 24.1708 55.9894 24.153 55.9399 24.1429C55.9361 23.1389 55.931 22.1363 55.9272 21.1324C55.9209 19.6931 55.9158 18.2526 55.9069 16.8133C55.8993 15.4959 55.8866 14.1772 55.8765 12.8598C55.8942 12.8623 55.912 12.8598 55.9272 12.8496C56.7315 12.8496 57.5346 12.8496 58.3389 12.8496L58.3618 12.856L58.3846 12.8509L58.3833 12.8496Z" fill="#252525"></path><path d="M47.5959 9.12127C46.6825 10.7052 45.3466 11.7688 43.6085 12.3196C43.2026 12.4478 42.7763 12.5113 42.3577 12.6001C42.2321 12.6268 42.1027 12.6433 41.9758 12.6649C41.5711 12.661 41.1651 12.656 40.7604 12.6522C40.5574 12.6331 40.3545 12.6128 40.1502 12.5938H40.1515C40.1312 12.5938 40.1096 12.5938 40.0893 12.595C39.611 12.5075 39.134 12.4072 38.6811 12.2308C37.1613 11.6419 35.956 10.6722 35.1416 9.24438C35.1225 9.21138 35.1162 9.17077 35.1035 9.13269C36.2593 9.13016 37.4137 9.12889 38.5695 9.12635C39.0795 9.57691 39.663 9.89548 40.3227 10.0668C40.5042 10.1138 40.6919 10.1341 40.8771 10.1671C41.2019 10.261 41.528 10.2547 41.854 10.1709C42.7103 10.0199 43.5058 9.73683 44.1579 9.13269C44.1934 9.09969 44.2416 9.07939 44.2835 9.05273C44.3837 9.05781 44.4852 9.06796 44.5854 9.06796C45.4862 9.06543 46.3856 9.05908 47.2864 9.06035C47.3904 9.06035 47.4932 9.09843 47.5972 9.12L47.5959 9.12127Z" fill="#252525"></path><path d="M70.8331 12.7279C70.757 12.7444 70.6796 12.7749 70.6034 12.7749C69.3982 12.7774 68.193 12.7749 66.9878 12.7749C66.9916 12.7597 66.9929 12.7432 66.9929 12.7267C67.735 12.7228 68.4785 12.7178 69.2206 12.7127C69.331 12.7127 69.4414 12.7076 69.5517 12.7051C69.9793 12.7127 70.4055 12.719 70.8331 12.7267V12.7279Z" fill="#252525"></path><path d="M38.5695 9.12791C37.4137 9.13045 36.2593 9.13172 35.1035 9.13426C35.1555 9.11395 35.2075 9.07588 35.2596 9.07588C36.2999 9.06826 37.3414 9.06445 38.3817 9.06445C38.4439 9.06445 38.5073 9.10634 38.5695 9.12791Z" fill="#252525"></path><path d="M47.5962 9.12184C47.4922 9.10154 47.3894 9.06219 47.2854 9.06219C46.3846 9.06219 45.4852 9.06727 44.5844 9.06981C44.4842 9.06981 44.3827 9.05965 44.2825 9.05458C44.3687 9.03934 44.4563 9.01015 44.5425 9.01015C45.4813 9.00381 46.4201 9.00254 47.3589 9C47.4287 9 47.501 9 47.5683 9.01396C47.5835 9.01777 47.586 9.08377 47.5936 9.12057L47.5962 9.12184Z" fill="#252525"></path><path d="M73.1607 24.0283C73.5032 24.0347 73.8458 24.0435 74.1883 24.0448C74.7135 24.0461 75.2387 24.0448 75.7627 24.0372C75.8693 24.0359 75.9771 24.0067 76.0837 23.9902C76.0799 24.0207 76.0799 24.0753 76.0722 24.0765C75.972 24.0892 75.8705 24.0981 75.7703 24.0994C74.9799 24.1032 74.1883 24.1045 73.3979 24.1057C73.3129 24.1057 73.2102 24.1438 73.1594 24.0283H73.1607Z" fill="#252525"></path><path d="M28.3956 13.0216C27.5012 13.0216 26.6068 13.0216 25.7124 13.0216C25.805 13.0025 25.8976 12.9695 25.9902 12.9683C26.6918 12.9581 27.3934 12.9543 28.0962 12.9492C28.1977 12.953 28.2992 12.9556 28.4019 12.9594C28.3994 12.9809 28.3981 13.0025 28.3956 13.0241V13.0216Z" fill="#252525"></path><path d="M35.7 24.3367C35.7976 24.3202 35.8941 24.291 35.9917 24.2897C36.6096 24.2834 37.2274 24.2859 37.8452 24.2808C37.9429 24.2808 38.0406 24.2542 38.1396 24.2402C38.1548 24.2631 38.1713 24.2859 38.2068 24.3367C37.3543 24.3367 36.5271 24.3367 35.7 24.3367Z" fill="#252525"></path><path d="M66.2822 24.0853C66.8798 24.0903 67.4773 24.0979 68.0761 24.1005C68.3197 24.1005 68.562 24.0903 68.8056 24.084C68.7358 24.1081 68.666 24.1538 68.5962 24.1551C67.9023 24.1639 67.2083 24.1665 66.5131 24.1665C66.4319 24.1665 66.3254 24.2096 66.2822 24.0865V24.0853Z" fill="#252525"></path><path d="M55.9399 24.1387C55.9894 24.1488 56.0389 24.1666 56.0884 24.1666C56.8787 24.1615 57.6704 24.1552 58.4607 24.1488C58.3999 24.1717 58.339 24.2148 58.2768 24.2148C57.5625 24.2224 56.847 24.225 56.1328 24.2262C56.0592 24.2262 55.9628 24.2567 55.9399 24.1387Z" fill="#252525"></path><path d="M58.3388 12.8463C57.5345 12.8463 56.7315 12.8463 55.9271 12.8463C55.9233 12.8285 55.9221 12.8107 55.9233 12.793C56.734 12.793 57.5434 12.7942 58.3541 12.7955C58.3503 12.8133 58.3452 12.8298 58.3401 12.8475L58.3388 12.8463Z" fill="#252525"></path><path d="M70.8326 12.7298C70.4051 12.7222 69.9788 12.7159 69.5513 12.7083C69.6172 12.693 69.6832 12.6638 69.7492 12.6638C70.3708 12.6588 70.9925 12.6562 71.6128 12.66C71.6991 12.66 71.7841 12.693 71.8704 12.7108C71.524 12.7171 71.1777 12.7248 70.8313 12.7311L70.8326 12.7298Z" fill="#252525"></path><path d="M19.8077 13.0408C19.3523 13.0357 18.8955 13.0319 18.4401 13.0268C18.1864 13.0243 17.9339 13.0179 17.6802 13.0141C17.7461 12.9976 17.8121 12.9671 17.8781 12.9671C18.4426 12.9621 19.0059 12.9583 19.5705 12.9633C19.6491 12.9633 19.7278 13.0141 19.8064 13.0408H19.8077Z" fill="#252525"></path><path d="M68.8232 20.4645C69.4208 20.4595 70.017 20.4531 70.6146 20.4531C70.6653 20.4531 70.7148 20.4937 70.7655 20.5153C70.1211 20.5153 69.4753 20.5166 68.8309 20.5179C68.8283 20.5001 68.8258 20.4836 68.8245 20.4658L68.8232 20.4645Z" fill="#252525"></path><path d="M46.0496 24.2778C46.146 24.2613 46.2411 24.2321 46.3375 24.2309C46.8095 24.2232 47.2802 24.2232 47.7521 24.2207C47.7128 24.2423 47.6734 24.2816 47.6341 24.2816C47.1063 24.2842 46.5773 24.2804 46.0496 24.2778Z" fill="#252525"></path><path d="M22.3108 24.4556C22.4072 24.4391 22.5036 24.4086 22.6 24.4073C23.0352 24.3997 23.4691 24.401 23.9042 24.3984C23.8649 24.42 23.8268 24.4594 23.7875 24.4594C23.2953 24.4619 22.803 24.4581 22.3108 24.4556Z" fill="#252525"></path><path d="M40.7606 12.6523C41.1653 12.6562 41.5713 12.6612 41.976 12.665C41.9405 12.6815 41.9037 12.7133 41.8681 12.712C41.4571 12.7018 41.0461 12.6866 40.635 12.6727C40.6769 12.6663 40.7187 12.6587 40.7606 12.6523Z" fill="#252525"></path><path d="M41.8541 10.1737C41.528 10.2575 41.202 10.2638 40.8772 10.1699C41.2032 10.1712 41.528 10.1725 41.8541 10.1737Z" fill="#252525"></path><path d="M41.7988 14.3533C41.4918 14.3533 41.1835 14.3533 40.8765 14.3533C41.1835 14.267 41.4918 14.2683 41.7988 14.3533Z" fill="#252525"></path><path d="M66.9927 12.7296C66.9927 12.7461 66.9915 12.7613 66.9877 12.7778C66.7339 12.7816 66.4815 12.7842 66.229 12.788C66.2759 12.7664 66.3216 12.7258 66.3686 12.7258C66.5766 12.722 66.7847 12.7283 66.9927 12.7309V12.7296Z" fill="#252525"></path><path d="M40.9355 16.8481C41.1829 16.7644 41.4291 16.7631 41.6752 16.8507C41.4291 16.8507 41.1817 16.8494 40.9355 16.8481Z" fill="#252525"></path><path d="M40.7604 12.6521C40.7185 12.6585 40.6766 12.6661 40.6348 12.6724C40.4737 12.6458 40.3113 12.6204 40.1501 12.5938C40.3531 12.6128 40.5561 12.6331 40.7604 12.6521Z" fill="#252525"></path><path d="M28.4017 12.9562C28.3002 12.9524 28.1987 12.9499 28.0959 12.9461C28.2 12.8801 28.3027 12.8712 28.4017 12.9562Z" fill="#252525"></path><path d="M48.3685 20.3889L48.314 20.1973C48.3317 20.2607 48.3495 20.3242 48.3685 20.3889Z" fill="#252525"></path><path d="M55.9219 12.7923C55.9219 12.8101 55.9219 12.8278 55.9257 12.8456C55.9105 12.8557 55.8928 12.8596 55.875 12.8557C55.8902 12.8342 55.9067 12.8126 55.9219 12.791V12.7923Z" fill="#252525"></path><path d="M40.0908 12.595C40.1111 12.595 40.1327 12.595 40.153 12.5938C40.1327 12.5938 40.1111 12.5938 40.0908 12.595Z" fill="#252525"></path><path d="M58.3389 12.8454C58.344 12.8288 58.3492 12.8109 58.353 12.793C58.3632 12.8109 58.3735 12.8288 58.3837 12.8467L58.3607 12.8518L58.3376 12.8454H58.3389Z" fill="#252525"></path><path d="M68.8236 20.4648C68.8261 20.4828 68.8287 20.4994 68.83 20.5173L68.8044 20.5237L68.7788 20.5212C68.7929 20.502 68.8082 20.484 68.8223 20.4648H68.8236Z" fill="#252525"></path><path d="M75.5854 15.2723C75.5663 15.2495 75.5486 15.2267 75.5295 15.2051C75.5486 15.2279 75.5663 15.2508 75.5854 15.2723Z" fill="#252525"></path><path d="M75.6266 15.4035C75.6165 15.3768 75.6063 15.3502 75.5962 15.3223C75.6063 15.3489 75.6165 15.3756 75.6266 15.4035Z" fill="#252525"></path><path d="M68.7722 18.1953C69.2784 18.1966 69.7859 18.1991 70.2921 18.2004C70.7577 18.2004 71.2245 18.2004 71.6901 18.2004C71.5518 18.2194 71.4123 18.255 71.274 18.2562C70.5065 18.2651 69.7402 18.2664 68.9727 18.2638C68.9054 18.2638 68.8382 18.2194 68.7722 18.1953Z" fill="#252525"></path><path d="M71.6271 15.029C70.6744 15.0302 69.7203 15.0328 68.7676 15.034C68.7968 15.015 68.8259 14.9782 68.8551 14.9782C69.7254 14.9731 70.597 14.9718 71.4673 14.9731C71.5205 14.9731 71.5726 15.0087 71.6258 15.029H71.6271Z" fill="#252525"></path></g><text x="29" y="38" font-family="Satoshi" font-size="12" fill="#252525">${name}</text><defs><clipPath id="clip0_214_542"><rect width="59.0849" height="15.4702" fill="white" transform="translate(17 9)"></rect></clipPath></defs></svg>`;
  const parser = new DOMParser();
  /** @type {SVGSVGElement} */
  const pinSvg = parser.parseFromString(
    plainTextSvg,
    "image/svg+xml"
  ).documentElement;

  return pinSvg;
};

const loader = new Loader({
  apiKey: MAP_APIKEY,
  version: "beta",
});

loader.load().then(async () => {
  const { Map } = await google.maps.importLibrary("maps");
  const { ColorScheme } = await google.maps.importLibrary("core");
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

  const { getMapInfo, getName } = usePage();
  const { coords } = getMapInfo();
  const name = getName();

  const content = getSvgPinContent(name);
  const [lat, lng] = coords;

  const map = new Map(document.getElementById("map"), {
    center: { lat, lng },
    zoom: 16,
    colorScheme: ColorScheme.DARK,
    mapId: "DEMO_MAP_ID",
  });

  new AdvancedMarkerElement({
    map,
    content,
    position: { lat, lng },
  });
});

const Location = () => {
  const { getMapInfo, getName } = usePage();

  const name = getName();
  const { title, body, location } = getMapInfo();

  document.title = `WFM Investments | VOIR ${name}`;

  onceMounted(() => {
    const info = document.getElementById("location-info"),
      map = document.getElementById("location-map");

    map.style.height = `${info.clientHeight}px`;
  });

  return /*html*/ `
	<section class="voir__location">
		<div class="voir__location__map" id="location-map">
			<div id="map"></div>
		</div>

		<div class="voir__location__info" id="location-info">
			<h4>${title}</h4>
			<i>${location}</i>
			<p>${body}</p>
		</div>
	</section>`;
};

export default Location;
